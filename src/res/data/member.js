import placeholder
  from 'src/res/image/member/placeholder.jpg'
import BingGuoChi
  from 'src/res/image/member/Bing-Guo-Chi.png'
import BoYiWu
  from 'src/res/image/member/Bo-Yi-Wu.png'
import ChenHan
  from 'src/res/image/member/Chen-Han.png'
import ChingShanTseng
  from 'src/res/image/member/Ching-Shan-Tseng.png'
import CutieP
  from 'src/res/image/member/Cutie-P.png'
import DengDengDeng
  from 'src/res/image/member/Deng-Deng-Deng.png'
import HowToTrain
  from 'src/res/image/member/How-To-Train.png'
import ReinaldAdrianPugoy
  from 'src/res/image/member/Reinald-Adrian-Pugoy.png'
import TimothyStephenNiven
  from 'src/res/image/member/Timothy-Stephen-Niven.png'
import TzuHsuanChou
  from 'src/res/image/member/Tzu-Hsuan-Chou.png'
import YiChunChen
  from 'src/res/image/member/Yi-Chun-Chen.png'
import YiTingDing
  from 'src/res/image/member/Yi-Ting-Ding.png'
import YingJiaLin
  from 'src/res/image/member/Ying-Jia-Lin.png'
import YuYingLin
  from 'src/res/image/member/Yu-Ying-Lin.png'
import YudiantoSujana
  from 'src/res/image/member/Yudianto-Sujana.png'
import ZhenYiWu
  from 'src/res/image/member/Zhen-Yi-Wu.png'
import ZiKuanHuang
  from 'src/res/image/member/Zi-Kuan-Huang.png'

export const memberData = [
  {
    zh: '寒山',
    en: 'Timothy Stephen Niven',
    dept: 0,
    deg: 0,
    image: TimothyStephenNiven,
  },
  {
    zh: '周子軒',
    en: 'Tzu Hsuan Chou',
    dept: 0,
    deg: 0,
    image: TzuHsuanChou,
  },
  {
    zh: '蘇嘉納',
    en: 'Yudianto Sujana',
    dept: 0,
    deg: 0,
    image: YudiantoSujana,
  },
  {
    zh: '李佳文',
    en: 'Jiawen Li',
    dept: 0,
    deg: 0,
  },
  {
    zh: '李仁傑',
    en: 'Reinald Adrian Pugoy',
    dept: 0,
    deg: 0,
    image: ReinaldAdrianPugoy,
  },
  {
    zh: '林英嘉',
    en: 'Ying Jia Lin',
    dept: 0,
    deg: 0,
    image: YingJiaLin,
  },
  {
    zh: '倪仕文',
    en: 'Shiwen Ni',
    dept: 0,
    deg: 0,
  },
  {
    zh: '林雨瑩',
    en: 'Yu Ying Lin',
    dept: 0,
    deg: 1,
    image: YuYingLin,
  },
  {
    zh: '林聖軒',
    en: 'Sheng Xuan Lin',
    dept: 0,
    deg: 1,
  },
  {
    zh: '丁怡婷',
    en: 'Yi Ting Ding',
    dept: 1,
    deg: 1,
    image: YiTingDing,
  },
  {
    zh: '王鈺云',
    en: 'Yu Yun Wang',
    dept: 0,
    deg: 1,
  },
  {
    zh: '潘昌義',
    en: 'Chang Yi Pan',
    dept: 0,
    deg: 1,
  },
  {
    zh: '陳晗',
    en: 'Han Chen',
    dept: 1,
    deg: 1,
    image: ChenHan,
  },
  {
    zh: '蔡文傑',
    en: 'Wen Jie Tsai',
    dept: 0,
    deg: 1,
  },
  {
    zh: '黃子寬',
    en: 'Zi Kuan Huang',
    dept: 0,
    deg: 1,
    image: ZiKuanHuang,
  },
  {
    zh: '陳怡君',
    en: 'Yi Chun Chen',
    dept: 1,
    deg: 1,
    image: YiChunChen,
  },
  {
    zh: '吳貞頤',
    en: 'Zhen Yi Wu',
    dept: 0,
    deg: 1,
    image: ZhenYiWu,
  },
  {
    zh: '曾敬珊',
    en: 'Ching Shan Tseng',
    dept: 0,
    deg: 1,
    image: ChingShanTseng,
  },
  {
    zh: '吳柏逸',
    en: 'Bo Yi Wu',
    dept: 0,
    deg: 1,
    image: BoYiWu,
  },
  {
    zh: '陳比恩',
    en: 'Daniel (Bi En) Tan',
    dept: 1,
    deg: 1,
  },
  {
    zh: '陳冠友',
    en: 'Kuan Yu Chen',
    dept: 2,
    deg: 1,
  },
  {
    zh: '黃獻德',
    en: 'Hsien De Huang',
    dept: 0,
    deg: 0,
    year: 2019,
  },
  {
    zh: '劉昭陽',
    en: 'Zhao Yang Liu',
    dept: 0,
    deg: 1,
    year: 2019,
  },
  {
    zh: '魏奇安',
    en: 'Chi An Wei',
    dept: 0,
    deg: 1,
    year: 2019,
  },
  {
    zh: '葉修宏',
    en: 'Siou Hong Yeh',
    dept: 0,
    deg: 1,
    year: 2018,
  },
  {
    zh: '楊馥謙',
    en: 'Fu Chien Yang',
    dept: 0,
    deg: 1,
    year: 2018,
  },
  {
    zh: '蔡子健',
    en: 'Zi Jian Cai',
    dept: 0,
    deg: 1,
    year: 2018,
  },
  {
    zh: '陳奕廷',
    en: 'Yi Ting Chen',
    dept: 0,
    deg: 0,
  },
  {
    zh: '陳宜勤',
    en: 'Yi Chin Chen',
    dept: 0,
    deg: 1,
    year: 2017,
  },
  {
    zh: '李冠霖',
    en: 'Guan Lin Li',
    dept: 0,
    deg: 1,
    year: 2017,
  },
  {
    zh: '許顥瀚',
    en: 'Hao Han Hsu',
    dept: 0,
    deg: 1,
    year: 2017,
  },
  {
    zh: '王夢昀',
    en: 'Meng Yun Wang',
    dept: 0,
    deg: 1,
    year: 2019,
  },
  {
    zh: '梁智堯',
    en: 'Jhih Yao Liang',
    dept: 0,
    deg: 1,
    year: 2019,
  },
  {
    zh: '蘇志盛',
    en: 'Jhih Sheng Su',
    dept: 0,
    deg: 1,
    year: 2019,
  },
  {
    zh: '楊凱州',
    en: 'Kai Chou Yang',
    dept: 0,
    deg: 1,
    year: 2019,
  },
  {
    zh: '許湘琪',
    en: 'Shiang Chi Hsu',
    dept: 1,
    deg: 1,
    year: 2019,
  },
  {
    zh: '吳昊',
    en: 'Hao Wu',
    dept: 0,
    deg: 1,
    year: 2019,
  },
  {
    zh: '王越',
    en: 'Yue Wang',
    dept: 0,
    deg: 1,
    year: 2019,
  },
  // Easter eggs.
  // Make sure you add member before them.
  {
    zh: '登登登',
    en: 'Deng Deng Deng',
    dept: 0,
    deg: 0,
    image: DengDengDeng,
  },
  {
    zh: '俏皮皮',
    en: 'Cutie P',
    dept: 0,
    deg: 1,
    image: CutieP,
  },
  {
    zh: '皓土川',
    en: 'How To Train',
    dept: 0,
    deg: 0,
    image: HowToTrain,
    year: 2014,
  },
  {
    zh: '冰過齊',
    en: 'Guo Chi Bing',
    dept: 0,
    deg: 1,
    image: BingGuoChi,
    year: 1992,
  },
]

export default memberData
export const parsingRule = {
  deg: [
    'phd', // 0 for phd degree
    'master', // 1 for master degree
  ],
  dept: [
    'CSIE', // 0 for Computer Science and Information Engineering
    'IMI', // 1 for Institute of Medical Informatics
    'AIMP', // 2 for Artificial Intelligence Technology Master Program
  ],
}

const schemaCheck = () => {
  // We use the json-schema.org spec.
  // See https://json-schema.org/specification.html
  const schema = {
    description: 'An array of members data.',
    type: 'array',
    items: {
      description: 'Member data.',
      type: 'object',
      required: ['deg', 'dept'],
      properties: {
        zh: {
          description: 'Chinese name of a member.',
          type: 'string',
        },
        en: {
          description: 'English name of a member.',
          type: 'string',
        },
        deg: {
          description: 'Degree of a member.',
          type: 'number',
        },
        dept: {
          description: 'Belonged department of a member.',
          type: 'number',
        },
        year: {
          description: 'Year of graduation',
          type: 'number',
        },
        image: {
          description: 'Member\'s photo',
          type: 'string',
        },
      },
    },
  }

  const validator = (input, type) => {
    if (type === 'array') {
      return Array.isArray(input)
    }
    return (typeof input) === type
  }

  // Check each field with above schema. `memberData` must be an array,
  // so this one will be written explicitly.
  if (!validator(memberData, 'array')) {
    throw new Error(`memberData is not type array.`)
  }

  memberData.forEach((member) => {
    // Items in `memberData` must be an object, so this one will
    // also be written explicitly.
    if (!validator(member, 'object')) {
      throw new Error(`memberData is not type object.`)
    }

    // Check if Chinese name is filled.
    let useZh = false
    if (member.zh) {
      useZh = true
      if (!validator(member.zh, schema.items.properties.zh.type)) {
        throw new Error(
            `memberData.zh is not type ${schema.items.properties.zh.type}.`,
        )
      }
    }

    // Check if English name is filled.
    let useEn = false
    if (member.en) {
      useEn = true
      if (!validator(member.en, schema.items.properties.en.type)) {
        throw new Error(
            `memberData.en is not type ${schema.items.properties.en.type}.`,
        )
      }
    }

    // Throw if both names are not filled.
    if (!(useZh || useEn)) {
      throw new Error(
          `At least one of memberData.zh or memberData.en must be filled.`,
      )
    }

    // Check if degree is filled with correct range.
    if (!validator(member.deg, schema.items.properties.deg.type) ||
    !validator(parsingRule.deg[member.deg], 'string')) {
      throw new Error(
          `memberData.deg must be in range [0, ${parsingRule.deg.length - 1}].`,
      )
    }
    // Check if department is filled with correct range.
    if (!validator(member.dept, schema.items.properties.dept.type) ||
    !validator(parsingRule.dept[member.dept], 'string')) {
      throw new Error(
          `memberData.dept must be in range [0, ${
            parsingRule.dept.length - 1
          }].`,
      )
    }

    // Check if graduate year is filled with correct range.
    if (member.year) {
      if (!validator(member.year, schema.items.properties.year.type) ||
      member.year < 1990 ||
      member.year > new Date(Date.now()).getFullYear()) {
        throw new Error(
            `memberData.year must be in range [1990, ${
              new Date(Date.now()).getFullYear()
            }].`,
        )
      }
    }

    if (member.image) {
      if (!validator(member.image, schema.items.properties.image.type)) {
        throw new Error(
            'member.image should be imported in file: '+
          'src/res/data/member.js',
        )
      }
    } else {
      // Use a placeholde for member's image.
      member.image = placeholder
    }
  })
}

schemaCheck()
